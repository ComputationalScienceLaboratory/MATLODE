
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>OPTIONS_Configuration</title><meta name="generator" content="MATLAB 8.4"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2015-06-04"><meta name="DC.source" content="OPTIONS_Configuration.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>OPTIONS_Configuration</h1><!--introduction--><p>
  <div>
      <img style="float: right" src="../../../MATLODE_LOGO.png" height="150px"></img>
  </div>
</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Reference</a></li><li><a href="#4">Toggle Warning Configuration</a></li><li><a href="#5">User Supplied Options and Fine Tuning</a></li><li><a href="#6">Merge and General Configuration</a></li></ul></div><h2>Reference<a name="1"></a></h2><p>[1] Tony D'Augustine, Adrian Sandu. MATLODE: A MATLAB ODE Solver and     Sensitivity Analysis Toolbox. Submitted to ACM TOMS.</p><pre>Authored by Tony D'Augustine, Adrian Sandu, and Hong Zhang.
Computational Science Laboratory, Virginia Tech.
&copy;2015 Virginia Tech Intellectual Properties, Inc.</pre><pre class="codeinput"><span class="keyword">function</span> [ OPTIONS, Coefficient ] = OPTIONS_Configuration( OPTIONS_U, family, implementation, y0, tspan  )
</pre><h2>Toggle Warning Configuration<a name="4"></a></h2><p>To toggle user supplied warning system, toggle option parameter 'WarningConfig'.</p><pre class="codeinput">    <span class="keyword">if</span> ( OPTIONS_U.WarningConfig == false )
        warning(<span class="string">'off'</span>,<span class="string">'MatlODE:configuration'</span>);
    <span class="keyword">else</span>
        warning(<span class="string">'on'</span>,<span class="string">'MatlODE:configuration'</span>);
    <span class="keyword">end</span>
</pre><h2>User Supplied Options and Fine Tuning<a name="5"></a></h2><p>Each integrator is combed to guarentee applicable option settings are used and available by the user. Then required settings are fined tuned in prepartion for merging to the official option setting.</p><pre class="codeinput">    <span class="keyword">switch</span> ( implementation )
        <span class="keyword">case</span> <span class="string">'FWD'</span>
            <span class="keyword">switch</span> ( family )
                <span class="keyword">case</span> <span class="string">'ERK'</span>
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_ERK_FWD( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_ERK_FWD;
                <span class="keyword">case</span> <span class="string">'EXPK'</span>
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_EXPK_FWD( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_EXPK_FWD;
                <span class="keyword">case</span> <span class="string">'EXP'</span>
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_EXP_FWD( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_EXP_FWD;
                <span class="keyword">case</span> <span class="string">'RK'</span>
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_RK_FWD( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_RK_FWD;
                <span class="keyword">case</span> <span class="string">'ROK'</span>
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_ROK_FWD( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_ROK_FWD;
                <span class="keyword">case</span> <span class="string">'ROS'</span>
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_ROS_FWD( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_ROS_FWD;
                <span class="keyword">case</span> <span class="string">'SDIRK'</span>
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_SDIRK_FWD( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_SDIRK_FWD;
                <span class="keyword">otherwise</span>
                    error(<span class="string">'Internal Error: Family parameter is invalid.'</span>);
            <span class="keyword">end</span>
        <span class="keyword">case</span> <span class="string">'TLM'</span>
            <span class="keyword">switch</span> ( family )
                <span class="keyword">case</span> <span class="string">'ERK'</span>
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_ERK_TLM( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_ERK_TLM;
                <span class="keyword">case</span> <span class="string">'RK'</span>
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_RK_TLM( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_RK_TLM;
                <span class="keyword">case</span> <span class="string">'ROS'</span>
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_ROS_TLM( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_ROS_TLM;
                <span class="keyword">case</span> <span class="string">'SDIRK'</span>
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_SDIRK_TLM( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_SDIRK_TLM;
                <span class="keyword">otherwise</span>
                    error(<span class="string">'Internal Error: Family parameter is invalid.'</span>);
            <span class="keyword">end</span>
        <span class="keyword">case</span> <span class="string">'ADJ'</span>
            <span class="keyword">switch</span> ( family )
                <span class="keyword">case</span> <span class="string">'ERK'</span>
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_ERK_ADJ( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_ERK_ADJ;
                <span class="keyword">case</span> <span class="string">'RK'</span>
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_RK_ADJ( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_RK_ADJ;
                <span class="keyword">case</span> <span class="string">'ROS'</span>
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_ROS_ADJ( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_ROS_ADJ;
                <span class="keyword">case</span> <span class="string">'SDIRK'</span>
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_SDIRK_ADJ( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_SDIRK_ADJ;
                <span class="keyword">otherwise</span>
                    error(<span class="string">'Internal Error: Family parameter is invalid.'</span>);
            <span class="keyword">end</span>
        <span class="keyword">otherwise</span>
            error(<span class="string">'Internal Error: Implementation parameter is invalid.'</span>);
    <span class="keyword">end</span>
</pre><h2>Merge and General Configuration<a name="6"></a></h2><p>All integrator user option settings must merge with fine tuning. Once merged, default settings configuration will run to guarentee uniform default configurations across all integrators.</p><pre class="codeinput">    [ OPTIONS ]               = OPTIONS_Merge(OPTIONS_U,OPTIONS);
    [ OPTIONS, Coefficient ]  = OPTIONS_GeneralConfiguration(OPTIONS,family,implementation,y0,tspan);
</pre><pre class="codeinput"><span class="keyword">end</span>
</pre><p>
  <div>
      <img style="float: right" src="../../../CSL_LogoWithName_1.png" height="50px"></img>
  </div>
</p><p class="footer"><br><a href="http://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2014b</a><br></p></div><!--
##### SOURCE BEGIN #####
%% OPTIONS_Configuration
%
% <html>
%   <div>
%       <img style="float: right" src="../../../MATLODE_LOGO.png" height="150px"></img>
%   </div>
% </html>
%%
%% Reference
% [1] Tony D'Augustine, Adrian Sandu. MATLODE: A MATLAB ODE Solver and
%     Sensitivity Analysis Toolbox. Submitted to ACM TOMS.
%
%%
%  Authored by Tony D'Augustine, Adrian Sandu, and Hong Zhang.
%  Computational Science Laboratory, Virginia Tech.
%  ©2015 Virginia Tech Intellectual Properties, Inc.
%
function [ OPTIONS, Coefficient ] = OPTIONS_Configuration( OPTIONS_U, family, implementation, y0, tspan  )

    %% Toggle Warning Configuration
    % To toggle user supplied warning system, toggle option parameter
    % 'WarningConfig'.
    %
    if ( OPTIONS_U.WarningConfig == false )
        warning('off','MatlODE:configuration');
    else 
        warning('on','MatlODE:configuration');
    end

    %% User Supplied Options and Fine Tuning
    % Each integrator is combed to guarentee applicable option settings are
    % used and available by the user. Then required settings are fined
    % tuned in prepartion for merging to the official option setting. 
    switch ( implementation )
        case 'FWD'
            switch ( family )
                case 'ERK'
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_ERK_FWD( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_ERK_FWD;
                case 'EXPK'
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_EXPK_FWD( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_EXPK_FWD;
                case 'EXP'
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_EXP_FWD( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_EXP_FWD;
                case 'RK'
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_RK_FWD( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_RK_FWD;
                case 'ROK'
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_ROK_FWD( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_ROK_FWD;
                case 'ROS'
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_ROS_FWD( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_ROS_FWD;
                case 'SDIRK'
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_SDIRK_FWD( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_SDIRK_FWD;
                otherwise
                    error('Internal Error: Family parameter is invalid.');
            end
        case 'TLM'
            switch ( family )
                case 'ERK'
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_ERK_TLM( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_ERK_TLM;
                case 'RK'
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_RK_TLM( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_RK_TLM;                    
                case 'ROS'
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_ROS_TLM( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_ROS_TLM;                    
                case 'SDIRK'
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_SDIRK_TLM( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_SDIRK_TLM;                    
                otherwise
                    error('Internal Error: Family parameter is invalid.');                    
            end 
        case 'ADJ'
            switch ( family )
                case 'ERK'
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_ERK_ADJ( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_ERK_ADJ;                    
                case 'RK'
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_RK_ADJ( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_RK_ADJ;                                        
                case 'ROS'
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_ROS_ADJ( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_ROS_ADJ;                                        
                case 'SDIRK'
                    [ OPTIONS_U ] = OPTIONS_UserSupplied_SDIRK_ADJ( OPTIONS_U );
                    [ OPTIONS ]   = OPTIONS_FineTuned_SDIRK_ADJ;                                        
                otherwise
                    error('Internal Error: Family parameter is invalid.');                    
            end 
        otherwise
            error('Internal Error: Implementation parameter is invalid.');            
    end
    
    %% Merge and General Configuration
    % All integrator user option settings must merge with fine tuning. Once
    % merged, default settings configuration will run to guarentee uniform
    % default configurations across all integrators.
    [ OPTIONS ]               = OPTIONS_Merge(OPTIONS_U,OPTIONS);
    [ OPTIONS, Coefficient ]  = OPTIONS_GeneralConfiguration(OPTIONS,family,implementation,y0,tspan);    

end

%%
% <html>
%   <div>
%       <img style="float: right" src="../../../CSL_LogoWithName_1.png" height="50px"></img>
%   </div>
% </html>
##### SOURCE END #####
--></body></html>